{% load static %}
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.108.0">
    <title>Card Manager</title>

    <link rel="canonical" href="https://getbootstrap.com/docs/5.3/examples/sign-in/">


    <link href="{% static 'assets/dist/css/bootstrap.min.css' %}" rel="stylesheet">
    <link href="{% static 'css/headers.css' %}" rel="stylesheet">

    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }

      .b-example-divider {
        height: 3rem;
        background-color: rgba(0, 0, 0, .1);
        border: solid rgba(0, 0, 0, .15);
        border-width: 1px 0;
        box-shadow: inset 0 .5em 1.5em rgba(0, 0, 0, .1), inset 0 .125em .5em rgba(0, 0, 0, .15);
      }

      .b-example-vr {
        flex-shrink: 0;
        width: 1.5rem;
        height: 100vh;
      }

      .bi {
        vertical-align: -.125em;
        fill: currentColor;
      }

      .nav-scroller {
        position: relative;
        z-index: 2;
        height: 2.75rem;
        overflow-y: hidden;
      }

      .nav-scroller .nav {
        display: flex;
        flex-wrap: nowrap;
        padding-bottom: 1rem;
        margin-top: -1px;
        overflow-x: auto;
        text-align: center;
        white-space: nowrap;
        -webkit-overflow-scrolling: touch;
      }














    </style>


    <!-- Custom styles for this template -->
</head>

<body class="text-center">

<main class="form-signin w-100 m-auto">
    <!--    <div class="container">-->
    <!--        <header class="d-flex flex-wrap align-items-center justify-content-center justify-content-md-between py-3 mb-4 border-bottom">-->
    <!--            <a href="/" class="d-flex align-items-center col-md-3 mb-2 mb-md-0 text-dark text-decoration-none">-->
    <!--                <svg class="bi me-2" width="40" height="32" role="img" aria-label="Bootstrap">-->
    <!--                    <use xlink:href="#bootstrap"/>-->
    <!--                </svg>-->
    <!--            </a>-->
    <!--            <div class="col-md-3 text-end">-->
    <!--                <a href="logout">-->
    <!--                    <button type="button" class="btn btn-outline-primary me-2">Добавить новые карты</button>-->
    <!--                </a>-->
    <!--            </div>-->

    <!--            <div class="col-md-3 text-end">-->
    <!--                <a href="logout">-->
    <!--                    <button type="button" class="btn btn-outline-primary me-2">Выйти</button>-->
    <!--                </a>-->
    <!--            </div>-->
    <!--        </header>-->
    <!--    </div>-->

    <div class="container">
        <header class="d-flex flex-wrap align-items-center justify-content-center justify-content-md-between py-3 mb-4 border-bottom">
            <a href="#" class="d-flex align-items-center col-md-3 mb-2 mb-md-0 text-dark text-decoration-none">
                <svg class="bi me-2" width="40" height="32" role="img" aria-label="Bootstrap">
                    <use xlink:href="#bootstrap"/>
                </svg>
            </a>


            <div style="width:40%" class="col-md-3 text-end">
                <a href="index">
                    <button type="button" class="btn btn-outline-primary me-2">На главную</button>
                </a>
                <a href="{% url 'delete_card' card.serial card.number %}">
                    <button type="button" class="btn btn-outline-primary me-2">Удалить карту</button>
                </a>
                <a href="logout">
                    <button type="button" class="btn btn-primary">Выйти</button>
                </a>
            </div>
        </header>
    </div>

    {% if card %}
    <div class="list-group w-auto">


        <a href="#" class="list-group-item list-group-item-action d-flex gap-3 py-3" aria-current="true">
            <img src="https://github.com/twbs.png" alt="twbs" width="32" height="32"
                 class="rounded-circle flex-shrink-0">
            <div class="d-flex gap-2 w-100 justify-content-between">
                <div>
                    <h6 class="mb-0">{{ card.serial }} : {{ card.number }}</h6>

                    <table border="3" cellspacing="0" cellpadding="12">
                        <tbody>
                        <tr align="center">
                            <td>Дата выпуска</td>
                            <td>{{ card.date_of_issue }}</td>
                        </tr>
                        <tr align="center">
                            <td>Дата конца действия</td>
                            <td>{{ card.expiration_date }}</td>
                        </tr>
                        <tr align="center">
                            <td>Сумма на карте</td>
                            <td>{{ card.sum }}</td>
                        </tr>
                        <tr align="center">
                            <td>Статус</td>
                            <td>{{ card.status }}</td>
                        </tr>

                        </tbody>
                    </table>
                    <form action="{% url 'card_edit' card.serial card.number %}" method="post">
                        {% csrf_token %}
                        <div style="margin-top: 10px">
                            <label style="padding-right: 10px" type="text" placeholder="">Статус</label>
                            {{ form.edit }}<br><br>
                        </div>
                        <button class="btn btn-outline-primary me-2" type=submit>Сохранить изменения</button>
                    </form>

                </div>

            </div>
        </a>

    </div>
    <br><br>
    <div class="list-group w-auto">


            <img src="https://github.com/twbs.png" alt="twbs" width="32" height="32"
                 class="rounded-circle flex-shrink-0">
            <div class="d-flex gap-2 w-100 justify-content-between">
                <div>
                    <h6 class="mb-0">Статистика использования карты</h6>


                    {% if statistics %}
                    {% for statistic in statistics%}
                    <table border="3" cellspacing="0" cellpadding="12">
                        <tbody>
                        <tr align="center">
                            <td>Дата использования</td>
                            <td>{{ statistic.date }}</td>
                        </tr>
                        <tr align="center">
                            <td>Сумма</td>
                            <td>{{ statistic.sum }}</td>
                        </tr>
                        </tbody>
                    </table>
                    {% endfor %}
                    {% else %}
                    <table border="3" cellspacing="0" cellpadding="12">
                        <tbody>
                        <tr align="center">
                            <td>Карта пока не использовалась</td>

                        </tr>
                        </tbody>
                    </table>
                    {% endif %}


                </div>

            </div>

    </div>
    <br><br>
    {% else %}
    <h6 class="mb-0">Карта не найдена</h6>
    {% endif %}

</main>


</body>
</html>
